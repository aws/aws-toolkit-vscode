{
    "definitions": {
        "automation03": {
            "properties": {
                "runtimeConfig": {
                    "not": {}
                },
                "mainSteps": {
                    "items": {
                        "properties": {
                            "action": {
                                "enum": [
                                    "aws:approve",
                                    "aws:assertAwsResourceProperty",
                                    "aws:branch",
                                    "aws:changeInstanceState",
                                    "aws:copyImage",
                                    "aws:createImage",
                                    "aws:createStack",
                                    "aws:createTags",
                                    "aws:deleteImage",
                                    "aws:deleteStack",
                                    "aws:executeAutomation",
                                    "aws:executeAwsApi",
                                    "aws:executeScript",
                                    "aws:executeStateMachine",
                                    "aws:invokeLambdaFunction",
                                    "aws:pause",
                                    "aws:runCommand",
                                    "aws:runInstances",
                                    "aws:sleep",
                                    "aws:waitForAwsResourceProperty"
                                ]
                            },
                            "maxAttemps": {
                                "default": 1
                            },
                            "onFailure": {
                                "pattern": "((^|, )(Abort|Continue|step:\\w+))$"
                            },
                            "nextStep": {
                                "type": "string",
                                "description": "Specifies which step in an Automation workflow to process next after successfully completing a step."
                            },
                            "timeoutSeconds": {
                                "description": "The execution timeout value for the step. If the timeout is reached and the value of maxAttempts is greater than 1, then the step is not considered to have timed out until all retries have been attempted."
                            },
                            "isEnd": {
                                "type": ["string", "boolean"],
                                "default": false
                            },
                            "isCritical": {
                                "type": ["string", "boolean"],
                                "default": true
                            }
                        },
                        "allOf": [
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:approve"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_approve.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:assertAwsResourceProperty"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_assertAwsResourceProperty.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:branch"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_branch.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:changeInstanceState"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_changeInstanceState.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:copyImage"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_copyImage.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:createImage"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_createImage.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:createStack"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_createStack.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:createTags"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_createTags.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:deleteImage"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_deleteImage.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:deleteStack"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_deleteStack.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:executeAutomation"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_executeAutomation.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:executeAwsApi"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_executeAwsApi.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:executeScript"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_executeScript.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:executeStateMachine"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_executeStateMachine.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:invokeLambdaFunction"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_invokeLambdaFunction.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:pause"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_pause.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:runCommand"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_runCommand.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:runInstances"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_runInstances.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:sleep"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_sleep.json#/definitions/0.3"
                                }
                            },
                            {
                                "if": {
                                    "properties": {
                                        "action": {
                                            "const": "aws:waitForAwsResourceProperty"
                                        }
                                    }
                                },
                                "then": {
                                    "$ref": "automationSteps/aws_waitForAwsResourceProperty.json#/definitions/0.3"
                                }
                            },
                            {
                                "$ref": "snippets/automationSnippets.json#/definitions/0.3"
                            }
                        ],
                        "required": ["inputs"]
                    }
                }
            }
        }
    }
}
